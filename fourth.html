<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>MARS AS 3D</title>
        <link rel="icon" href="faviconwhiteback.svg">
        <link rel="stylesheet" href="cardStyle.css">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/css.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/xml.min.js"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
        <script>
            hljs.highlightAll();
            hljs.initLineNumbersOnLoad();
        </script>
        <script type="importmap">
        {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.181.2/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.181.2/examples/jsm/"
        }
        }
        </script>
    </head>
    <body>
        <header>
            <h1>3D OBJECT IN HTML</h1>
            <div class="back-button">
                <a type="button" href="index.html">&#11013;</a>
            </div>
        </header>
        <div id="cube3d_2"></div>
        <main>
            <div class="code-card">
                <h3>HTML</h3>
                <pre class="code-block">
                <code class="language-html">&lt;div id="cube3d_2"&gt;&lt;/div&gt;</code>
                </pre>
            </div>

            <div class="code-card">
                <h3>CSS</h3>
                <pre class="code-block">
                <code class="language-css">#cube3d_2 {
    background-image: url("Cube/904bdd9a4687202c367935d040777be0-2711141815.jpg");
    background-size: cover;
    background-attachment: scroll;
    border-radius: 10px;
    margin-top: 10px
}</code>
                </pre>
            </div>

            <div class="code-card">
                <h3>JS</h3>
                <pre class="code-block">
                <code class="language-javascript">import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.181.2/build/three.module.js";
import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.181.2/examples/jsm/controls/OrbitControls.js";
import { GLTFLoader } from "https://cdn.jsdelivr.net/npm/three@0.181.2/examples/jsm/loaders/GLTFLoader.js";



//3D
//Creat a scene
const scene = new THREE.Scene();
//Camera
let camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);

//Obj variable
let object;
// OrbitControls â€” to move the camers
let controls;
//follow the camera in Blender
let mixer;


const loader = new GLTFLoader();



// Load the GLTF file
loader.load('Cube/Cubescene.gltf',

    // When the file is successfully loaded
    function (gltf) {
        object = gltf.scene;
        scene.add(object);

        mixer = new THREE.AnimationMixer(object);
        const clips = gltf.animations;
        const clip = THREE.AnimationClip.findByName(clips, "SphereAction" );
        const action = mixer.clipAction(clip);
        action.play();
    
    },
        
    // While loading, show the progress
    function (xhr) {
        console.log((xhr.loaded / xhr.total * 100) + '% loaded');
    },

    // If an error occurs, log it
    function (error) {
        console.error(error);
    }
);


// RENDER
// This renderer uses WebGL 2 to display scenes.
// Create a new WebGL renderer with a transparent background
const renderer = new THREE.WebGLRenderer({ alpha: true }); 
// Set the renderer size to the full window
renderer.setSize(window.innerWidth, window.innerHeight);
document.getElementById("cube3d_2").appendChild(renderer.domElement)
// RENDER END


// CONTROL
controls = new OrbitControls(camera, renderer.domElement);
// To make it static not in the scene //IMPORTANT
controls.enabled = false;
// Set how far the camera will be from the 3D model
camera.position.z = 3;
// CONTROL END


// LIGHTS
// Add lights to the scene so we can actually see the 3D model
const directionalLight  = new THREE.DirectionalLight(0xffffff, 0.1); // (color, intensity)
directionalLight.position.set(500, 500, 500); // top-left-ish direction
directionalLight.shadow = true;
scene.add(directionalLight);
// This light globally illuminates all objects in the scene equally
// Add ambient light for softer global lighting
const ambientLight = new THREE.AmbientLight(0xffffff, 2); // (color, intensity)
scene.add(ambientLight);
// LIGHTS END

const clock = new THREE.Clock();
// Render the scene with rotation
function animate() {
    requestAnimationFrame(animate);

    mixer.update(clock.getDelta())
    renderer.render(scene, camera);
}

// Adjust the camera and renderer when the window is resized
window.addEventListener("resize", function () {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();

    renderer.setSize(window.innerWidth, window.innerHeight);
});

animate();</code>
                </pre>

            </div>
        </main>
        <footer>
            <a class="download-link" href="/CubeZip.zip" download>
            Download gltf 3d Object it's free <img src="faviconsmile.svg" alt="" style="width: 20px;">
            </a>
        </footer>
        <script type="module" src="mainFor3Dcube.js"></script>
    </body>
</html>